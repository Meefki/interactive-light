{"version":3,"file":"interactive-light.js","sources":["D:/FoundryVTT/Data/modules/interactive-light/src/scripts/utils/constants.ts","D:/FoundryVTT/Data/modules/interactive-light/src/scripts/utils/logger.ts","D:/FoundryVTT/Data/modules/interactive-light/src/scripts/hooks-service.ts","../src/interactive-light.ts"],"sourcesContent":["// console colors\r\nexport const consoleColor1 = 'color: #7bf542';\r\nexport const consoleColor2 = 'color: #d8eb34';\r\nexport const consoleColor3 = 'color: #ffffff';\r\n\r\n// environment\r\nexport const debug = true;\r\n\r\n// settings\r\nexport const defaultIconPath = '';\r\n\r\nexport * as cnt from \"./constants\"; ","import { cnt } from \"./constants\";\r\n\r\nexport class Logger {\r\n    public static log(object: any) {\r\n        console.log(`%c Interactive%cLight %c`, cnt.consoleColor1, cnt.consoleColor2, cnt.consoleColor3, object);\r\n    }\r\n}","import { cnt } from './utils/constants';\r\nimport { HTMLFilePickerElement } from './utils/elements/HTMLFilePickerElement';\r\nimport { Logger } from './utils/logger';\r\n\r\nexport function initHook(data: any) {\r\n    Hooks.on('renderAmbientLightConfig', renderLightConfigHook);\r\n    Hooks.on('renderWallConfig', renderLightConfigHook);\r\n}\r\n\r\nexport function readyHook(data: any) {\r\n    if (cnt.debug) Logger.log(\"ready\");\r\n    // const id = 'hKSaEAMDpyivZozX';\r\n    // const light = game.canvas?.lighting?.get(id);\r\n    // light!.mouseInteractionManager!.callbacks = {\r\n    //     \"clickLeft\": Switcher.lightClickLeftCallback\r\n    // };\r\n}\r\n\r\nfunction renderLightConfigHook(app: any, html: HTMLElement, context: any, options: any) {\r\n    Logger.log(app);\r\n\r\n    const document: AmbientLightDocument = app.document;\r\n    const isInteractive = document.getFlag(\"interactive-light\", \"interactive\") ?? false;\r\n\r\n    const interactiveElement = createInteractiveCheckboxHtmlElement(isInteractive);\r\n\r\n    let pathElement: HTMLElement; \r\n    const path = document.getFlag(\"interactive-light\", \"path\");\r\n    if (isInteractive) {\r\n        pathElement = createInteractivePathHtmlElement(app.id, path);\r\n    }\r\n\r\n    const advancetTabContent = html.querySelector('[data-application-part=\"advanced\"]')\r\n    advancetTabContent?.appendChild(interactiveElement);\r\n    if (isInteractive) {\r\n        advancetTabContent?.appendChild(pathElement!);\r\n    }\r\n}\r\n\r\nfunction createInteractiveCheckboxHtmlElement(checked: boolean): HTMLElement {\r\n    const formGroup = document.createElement('div');\r\n    formGroup.className = 'form-group';\r\n\r\n    const label = document.createElement('label') as HTMLLabelElement;\r\n    label.innerText = game.i18n!.localize(\"INTERACTIVE_LIGHT.Enabled\");\r\n\r\n    const formFields = document.createElement('div');\r\n    formFields.className = 'form-fields'\r\n\r\n    const input = document.createElement('input') as HTMLInputElement;\r\n    input.type = 'checkbox';\r\n    input.name = 'flags.interactive-light.interactive';\r\n    input.checked = checked;\r\n    \r\n    const hint = document.createElement('p') as HTMLParagraphElement;\r\n    hint.className = 'hint';\r\n    hint.innerText = game.i18n!.localize(\"INTERACTIVE_LIGHT.EnabledHint\");\r\n\r\n    formFields.appendChild(input);\r\n    formGroup.appendChild(label);\r\n    formGroup.appendChild(formFields);\r\n    formGroup.appendChild(hint);\r\n\r\n    return formGroup;\r\n}\r\n\r\nfunction createInteractivePathHtmlElement(id: string, path: string | undefined): HTMLElement {\r\n    const formGroup = document.createElement('div');\r\n    formGroup.className = 'form-group';\r\n\r\n    const label = document.createElement('label') as HTMLLabelElement;\r\n    label.htmlFor = 'flags.interactive-light.path';\r\n    label.innerText = game.i18n!.localize(\"INTERACTIVE_LIGHT.Path\");\r\n\r\n    const formFields = document.createElement('div');\r\n    formFields.className = 'form-fields'\r\n    formFields.innerHTML = `<file-picker name=\"flags.interactive-light.path\" type=\"image\" id=\"${id}-flags.interactive-light.path\" value=\"${path ?? ''}\"></file-picker>`;\r\n    Logger.log(formFields.getHTML());\r\n    Logger.log(formFields);\r\n\r\n    formGroup.appendChild(label); \r\n    formGroup.appendChild(formFields);\r\n\r\n    return formGroup;\r\n}\r\n\r\nexport * as register from './hooks-service';\r\n\r\n// <div class=\"form-group __web-inspector-hide-shortcut__\">\r\n//     <label for=\"WallConfig-Scene-Qti5DH6BY6kRnvS6-Wall-I9BGuNvX7d5X87je-animation.texture\">Текстура двери</label>\r\n//     <div class=\"form-fields\">\r\n//         <file-picker name=\"animation.texture\" type=\"image\" id=\"WallConfig-Scene-Qti5DH6BY6kRnvS6-Wall-I9BGuNvX7d5X87je-animation.texture\">\r\n//             <input class=\"image\" type=\"text\" placeholder=\"path/to/file.ext\">\r\n//             <button class=\"fa-solid fa-file-import fa-fw icon\" type=\"button\" data-tooltip=\"FILES.BrowseTooltip\" aria-label=\"FILES.BrowseTooltip\" tabindex=\"-1\">\r\n//             </button>\r\n//         </file-picker>\r\n//     </div>\r\n// </div>","import { register } from \"./scripts/hooks-service\";\r\n\r\nHooks.once('init', register.initHook);\r\nHooks.once('ready', register.readyHook);\r\n"],"names":["consoleColor1","consoleColor2","consoleColor3","Logger","object","cnt.consoleColor1","cnt.consoleColor2","cnt.consoleColor3","initHook","data","renderLightConfigHook","readyHook","app","html","context","options","document","isInteractive","interactiveElement","createInteractiveCheckboxHtmlElement","pathElement","path","createInteractivePathHtmlElement","advancetTabContent","checked","formGroup","label","formFields","input","hint","id","register.initHook","register.readyHook"],"mappings":"AACO,MAAMA,EAAgB,iBAChBC,EAAgB,iBAChBC,EAAgB,iBCDtB,MAAMC,CAAO,CAChB,OAAc,IAAIC,EAAa,CACnB,QAAA,IAAI,2BAA4BC,EAAmBC,EAAmBC,EAAmBH,CAAM,CAAA,CAE/G,CCFO,SAASI,EAASC,EAAW,CAC1B,MAAA,GAAG,2BAA4BC,CAAqB,EACpD,MAAA,GAAG,mBAAoBA,CAAqB,CACtD,CAEO,SAASC,EAAUF,EAAW,CACXN,EAAA,IAAI,OAAO,CAMrC,CAEA,SAASO,EAAsBE,EAAUC,EAAmBC,EAAcC,EAAc,CACpFZ,EAAO,IAAIS,CAAG,EAEd,MAAMI,EAAiCJ,EAAI,SACrCK,EAAgBD,EAAS,QAAQ,oBAAqB,aAAa,GAAK,GAExEE,EAAqBC,EAAqCF,CAAa,EAEzE,IAAAG,EACJ,MAAMC,EAAOL,EAAS,QAAQ,oBAAqB,MAAM,EACrDC,IACcG,EAAAE,EAAiCV,EAAI,GAAIS,CAAI,GAGzD,MAAAE,EAAqBV,EAAK,cAAc,oCAAoC,EAClFU,GAAA,MAAAA,EAAoB,YAAYL,GAC5BD,IACAM,GAAA,MAAAA,EAAoB,YAAYH,GAExC,CAEA,SAASD,EAAqCK,EAA+B,CACnE,MAAAC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aAEhB,MAAAC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,UAAY,KAAK,KAAM,SAAS,2BAA2B,EAE3D,MAAAC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,UAAY,cAEjB,MAAAC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,KAAO,WACbA,EAAM,KAAO,sCACbA,EAAM,QAAUJ,EAEV,MAAAK,EAAO,SAAS,cAAc,GAAG,EACvC,OAAAA,EAAK,UAAY,OACjBA,EAAK,UAAY,KAAK,KAAM,SAAS,+BAA+B,EAEpEF,EAAW,YAAYC,CAAK,EAC5BH,EAAU,YAAYC,CAAK,EAC3BD,EAAU,YAAYE,CAAU,EAChCF,EAAU,YAAYI,CAAI,EAEnBJ,CACX,CAEA,SAASH,EAAiCQ,EAAYT,EAAuC,CACnF,MAAAI,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,aAEhB,MAAAC,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,QAAU,+BAChBA,EAAM,UAAY,KAAK,KAAM,SAAS,wBAAwB,EAExD,MAAAC,EAAa,SAAS,cAAc,KAAK,EAC/C,OAAAA,EAAW,UAAY,cACvBA,EAAW,UAAY,qEAAqEG,CAAE,yCAAyCT,GAAQ,EAAE,mBAC1IlB,EAAA,IAAIwB,EAAW,SAAS,EAC/BxB,EAAO,IAAIwB,CAAU,EAErBF,EAAU,YAAYC,CAAK,EAC3BD,EAAU,YAAYE,CAAU,EAEzBF,CACX,CClFA,MAAM,KAAK,OAAQM,CAAiB,EACpC,MAAM,KAAK,QAASC,CAAkB"}